% !TEX root = ./main.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Dans cette section, il est demandé d'appliquer l'approche constructive pour la         %
% construction de votre code.                                                            %
%                                                                                        %
% Pour chaque Sous-Problème (une sous-section/SP):                                       %
% - {Pré} INIT {INV}                                                                     %
% - déterminer le Critère d'Arrêt (et donc le Gardien de Boucle)                         %
% - {INV & B} ITER {INV}                                                                 %
% - {INV & !B} END {Post}                                                                %
% - Fonction de Terminaison (pensez à justifier sur base de l'Invariant Graphique)       %
% (une sous-sous-section/tiret)                                                          %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Approche Constructive}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{lstlisting}[caption={SP1}]
int prefixe_suffixe(int *T, unsigned int N) {
   assert((T != NULL) && (0 < N));
   // {$ 0 < N $}
   unsigned int k = N - 1;
   // {$ k = N - 1 $}
   while (0 < k && !pref_equal_suff(T, N, k)) {
      // {$ 0 < k < N \land \lnot pref\_equal\_suff(T, N, k) $}
      k--;
   }
   // {$ k = 0 \lor pref\_equal\_suff(T, N, k) $}
   return k;
   // {$ T = T_0 \land N = N_0 $}
}
\end{lstlisting}


\begin{lstlisting}[caption={SP2}]
static int pref_equal_suff(int *T, unsigned int N, unsigned int k) {
   assert((T != NULL) && (0 < N) && (0 < k && k < N));
   // {$ 0 < k < N $}
   unsigned int i = 0;
   // {$ i = 0 $}
   while (i < k && T[i] == T[N - k + i]) {
      // {$ i < k \land T[i] = T[N - k + i] $}
      i++;
   }
   // {$ i = k \lor T[i] \neq T[N - k + i] $}
   return i == k;
   // {$ T = T_0 \land N = N_0 $}
}
\end{lstlisting}
